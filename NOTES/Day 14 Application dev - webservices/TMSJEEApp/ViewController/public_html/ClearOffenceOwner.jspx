<?xml version='1.0' encoding='windows-1252'?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.1"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:h="http://java.sun.com/jsf/html">
    <jsp:output omit-xml-declaration="true" doctype-root-element="HTML"
                doctype-system="http://www.w3.org/TR/html4/loose.dtd"
                doctype-public="-//W3C//DTD HTML 4.01 Transitional//EN"/>
    <jsp:directive.page contentType="text/html;charset=windows-1252"/>
    <f:view>
        <html>
            <head>
                <meta http-equiv="Content-Type"
                      content="text/html; charset=windows-1252"/>
                <title>Clear Offence</title>
                <link rel="stylesheet" type="text/css"
                      href="images/styles3.css"/>
            </head>
           <body>
                <div class="header">
                    <div class="header-left">
                        <h:form style="margin:0; padding:0; display:inline;">
                            <h:commandButton value="Profile"
                                             styleClass="profile-btn"
                                             action="#{backing_OwnerDashboard.profile_action}"/>
                        </h:form>
                    </div>
                    <div class="header-title">VEHICLE OWNER DASHBOARD</div>
                    <div class="header-right">
                        <h:form style="margin:0; padding:0;">
                            <h:commandButton value="Logout"
                                             styleClass="logout-btn"
                                             action="#{backing_OwnerDashboard.logout_action}"/>
                        </h:form>
                    </div>
                </div>
                <div class="main-layout">
                    <div class="sidebar">
                        <div class="sidebar-title">Pay Offence</div>
                        <div class="form-row">
                            <h:outputLabel value="Name" for="name"
                                           styleClass="sidebar-label"/>
                            <h:inputText value="#{backing_OwnerDashboard.loggedInOwner.ownerName}"
                                         id="name" readonly="true"
                                         styleClass="sidebar-input"/>
                        </div>
                        <h:form id="sidebarNavForm">
                            <div class="sidebar-nav">
                                <h:commandLink value="Home"
                                               action="#{backing_OwnerDashboard.home_action}"
                                               styleClass="sidebar-nav-link"/>
                                <h:commandLink value="View Vehicle"
                                               action="#{backing_OwnerDashboard.viewVehicle_action}"
                                               styleClass="sidebar-nav-link"/>
                                <h:commandLink value="Pay Offence"
                                               action="#{backing_OwnerDashboard.payOffence_action}"
                                               styleClass="sidebar-nav-link"/>
                            </div>
                        </h:form>
                    </div>
                   <div class="center-content">
                        <h:form id="clearOffenceForm" styleClass="admin-card"
                                style="max-width:900px; width:100%;">
                            <h2 class="admin-card-heading">Clear Pending Offences</h2>
                            <!-- Show Registration ID (readonly, not a combo box) -->
                            <h:panelGrid columns="2" styleClass="admin-card-row"
                                         cellpadding="8"
                                         columnClasses="label-col,value-col"
                                         style="margin-bottom:20px;">
                                <h:outputLabel value="Registration ID:"/>
                                <h:outputText value="#{backing_OwnerVehicles.selectedRegistration.registrationId}"
                                              styleClass="output-box"/>
                            </h:panelGrid>
                            <!-- Load Offences Button (separate section) -->
                            <div style="text-align:center; margin-bottom:18px;">
                                <h:commandButton value="Load Offences"
                                                 action="#{backing_ClearOffenceOwner.loadPendingOffences}"
                                                 styleClass="button-pink">
                                    <f:setPropertyActionListener
                                        target="#{backing_ClearOffenceOwner.selectedRegistrationId}"
                                        value="#{backing_OwnerVehicles.selectedRegistration.registrationId}" />
                                </h:commandButton>
                            </div>
                            <!-- Pending Offence Table -->
                            <h:panelGroup rendered="#{not empty backing_ClearOffenceOwner.allVehicleOffence}">
                                <h:dataTable value="#{backing_ClearOffenceOwner.allVehicleOffence}"
                                             var="offence" border="0"
                                             styleClass="offence-table"
                                             style="margin-top:20px;">
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Select"/>
                                        </f:facet>
                                        <h:selectBooleanCheckbox value="#{backing_ClearOffenceOwner.selected[offence.vehicleOffenceId]}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="ID"/>
                                        </f:facet>
                                        <h:outputText value="#{offence.vehicleOffenceId}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Offence Type"/>
                                        </f:facet>
                                        <h:outputText value="#{offence.offenceTypesEO.offenceType}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Location"/>
                                        </f:facet>
                                        <h:outputText value="#{offence.location}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Date"/>
                                        </f:facet>
                                        <h:outputText value="#{offence.offenceDate}">
                                            <f:convertDateTime pattern="dd-MMM-yyyy"/>
                                        </h:outputText>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Time"/>
                                        </f:facet>
                                        <h:outputText value="#{offence.time}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Reporter"/>
                                        </f:facet>
                                        <h:outputText value="#{offence.reporter}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Penalty"/>
                                        </f:facet>
                                        <h:outputText value="#{offence.offenceTypesEO.penaltyAmt}"/>
                                    </h:column>
                                </h:dataTable>
                                <!-- Button to open payment card (below table) -->
                                <div style="text-align:right; margin-top:20px;">
                                    <h:commandButton value="Clear Offence"
                                                     action="#{backing_ClearOffenceOwner.showPaymentCard_action}"
                                                     styleClass="button-pink"/>
                                </div>
                            </h:panelGroup>
                            <!-- Payment Confirmation Card -->
                            <h:panelGroup rendered="#{backing_ClearOffenceOwner.showPaymentCard}">
                                <div class="payment-card">
                                    <h2>Payment Confirmation</h2>
                                    <p>
                                        <strong>
                                            <h:outputText value="Total Payable: "/>
                                        </strong>
                                        <h:outputText value="#{backing_ClearOffenceOwner.totalPenalty}">
                                            <f:convertNumber type="currency" currencySymbol="?"/>
                                        </h:outputText>
                                    </p>
                                    <div class="payment-card-button-row">
                                        <h:commandButton value="Pay"
                                                         action="#{backing_ClearOffenceOwner.pay_action}"
                                                         styleClass="button-success"/>
                                        <h:commandButton value="Cancel"
                                                         action="#{backing_ClearOffenceOwner.cancelPayment_action}"
                                                         styleClass="button-danger"/>
                                    </div>
                                </div>
                            </h:panelGroup>
                            <h:messages globalOnly="true"/>
                        </h:form>
                    </div>
                </div>
            </body>
        </html>
    </f:view>
    <!--oracle-jdev-comment:auto-binding-backing-bean-name:backing_ClearOffenceOwner-->
</jsp:root>
